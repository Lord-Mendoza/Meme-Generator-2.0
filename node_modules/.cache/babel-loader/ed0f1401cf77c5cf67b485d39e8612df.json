{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\zenik\\\\OneDrive\\\\School\\\\GMU\\\\Super Senior\\\\SWE 432\\\\Homeworks\\\\HW4\\\\src\\\\FavoriteButton.js\";\n\n/*\r\nLord Mendoza\r\nSWE 432 - HW4\r\n\r\nThe following component has been created to facilitate the \"Favorite\" button, and is in charge of\r\nadding/removing it from the database\r\n */\nimport { Component } from \"react\";\nimport React from \"react\";\nimport firebase from \"./firebase\";\nimport { Button } from \"react-bootstrap\";\nimport LoadedImage from \"./LoadedImage\";\n\nvar FavoriteButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FavoriteButton, _Component);\n\n  function FavoriteButton(props) {\n    var _this;\n\n    _classCallCheck(this, FavoriteButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FavoriteButton).call(this, props));\n    _this.state = {\n      memeFavorited: false\n    }; //Tracks if the user favorited the given template\n\n    _this.favoriteMeme = _this.favoriteMeme.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.unfavoriteMeme = _this.unfavoriteMeme.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  /*\r\n  Initial call to firebase to consult the user's database to see if the meme is favorited or not (by checking if\r\n  it exists). If it's favorited, the favorite state is toggled; otherwise, not.\r\n   */\n\n\n  _createClass(FavoriteButton, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      firebase.firestore.collection(firebase.auth.currentUser.email).doc(this.props.src.template.creationDate).get().then(function (v) {\n        if (v.exists) {\n          _this2.setState({\n            memeFavorited: true\n          });\n        } else {\n          _this2.setState({\n            memeFavorited: false\n          });\n        }\n      });\n    }\n    /*\r\n    Handles changes to firebase and state if the user opted to favorite meme.\r\n     */\n\n  }, {\n    key: \"favoriteMeme\",\n    value: function favoriteMeme(e) {\n      var _this3 = this;\n\n      var temp = this.props.src.template;\n      temp[\"timeFavorited\"] = new Date().toString();\n      var docRef = firebase.firestore.collection(firebase.auth.currentUser.email).doc(this.props.src.template.creationDate).set(temp).then(function (v) {\n        _this3.setState({\n          memeFavorited: true\n        });\n      });\n    }\n    /*\r\n    Handles changes to firebase and state if the user opted to unfavorite meme.\r\n     */\n\n  }, {\n    key: \"unfavoriteMeme\",\n    value: function unfavoriteMeme(e) {\n      var _this4 = this;\n\n      var docRef = firebase.firestore.collection(firebase.auth.currentUser.email).doc(this.props.src.template.creationDate).delete().then(function (v) {\n        _this4.setState({\n          memeFavorited: false\n        });\n      });\n    }\n    /*\r\n    In charge of displaying the appropriate button configuration\r\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.memeFavorited) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(LoadedImage, {\n          src: this.props.src.img,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(Button, {\n          bsStyle: \"danger\",\n          onClick: this.unfavoriteMeme,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \" Remove Favorite \")));\n      } else {\n        if (!this.props.isUnfiltered) return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \" \");else return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(LoadedImage, {\n          src: this.props.src.img,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(Button, {\n          bsStyle: \"primary\",\n          onClick: this.favoriteMeme,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \" Add Favorite \")));\n      }\n    }\n  }]);\n\n  return FavoriteButton;\n}(Component);\n\nexport { FavoriteButton as default };","map":{"version":3,"sources":["C:\\Users\\zenik\\OneDrive\\School\\GMU\\Super Senior\\SWE 432\\Homeworks\\HW4\\src\\FavoriteButton.js"],"names":["Component","React","firebase","Button","LoadedImage","FavoriteButton","props","state","memeFavorited","favoriteMeme","bind","unfavoriteMeme","firestore","collection","auth","currentUser","email","doc","src","template","creationDate","get","then","v","exists","setState","e","temp","Date","toString","docRef","set","delete","img","isUnfiltered"],"mappings":"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","sourcesContent":["/*\r\nLord Mendoza\r\nSWE 432 - HW4\r\n\r\nThe following component has been created to facilitate the \"Favorite\" button, and is in charge of\r\nadding/removing it from the database\r\n */\r\nimport {Component} from \"react\";\r\nimport React from \"react\";\r\nimport firebase from \"./firebase\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport LoadedImage from \"./LoadedImage\";\r\n\r\nexport default class FavoriteButton extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.state = {memeFavorited: false};                //Tracks if the user favorited the given template\r\n        this.favoriteMeme = this.favoriteMeme.bind(this);\r\n        this.unfavoriteMeme = this.unfavoriteMeme.bind(this);\r\n    }\r\n\r\n    /*\r\n    Initial call to firebase to consult the user's database to see if the meme is favorited or not (by checking if\r\n    it exists). If it's favorited, the favorite state is toggled; otherwise, not.\r\n     */\r\n    componentWillMount()\r\n    {\r\n        firebase.firestore.collection(firebase.auth.currentUser.email).doc(this.props.src.template.creationDate)\r\n            .get().then(v => {\r\n            if (v.exists)\r\n            {\r\n                this.setState({memeFavorited: true});\r\n            }\r\n            else\r\n            {\r\n                this.setState({memeFavorited: false});\r\n            }\r\n        });\r\n    }\r\n\r\n    /*\r\n    Handles changes to firebase and state if the user opted to favorite meme.\r\n     */\r\n    favoriteMeme(e)\r\n    {\r\n        var temp = this.props.src.template;\r\n        temp[\"timeFavorited\"] = new Date().toString();\r\n        var docRef = firebase.firestore.collection(firebase.auth.currentUser.email)\r\n            .doc(this.props.src.template.creationDate).set(temp)\r\n            .then(v => {\r\n                this.setState({memeFavorited: true});\r\n            });\r\n    }\r\n\r\n    /*\r\n    Handles changes to firebase and state if the user opted to unfavorite meme.\r\n     */\r\n    unfavoriteMeme(e)\r\n    {\r\n        var docRef = firebase.firestore.collection(firebase.auth.currentUser.email)\r\n            .doc(this.props.src.template.creationDate).delete()\r\n            .then(v => {\r\n                this.setState({memeFavorited: false});\r\n            });\r\n    }\r\n\r\n    /*\r\n    In charge of displaying the appropriate button configuration\r\n     */\r\n    render()\r\n    {\r\n        if (this.state.memeFavorited)\r\n        {\r\n            return <div><LoadedImage src={this.props.src.img}/><div>\r\n                    <Button bsStyle=\"danger\"\r\n                             onClick={this.unfavoriteMeme}> Remove Favorite </Button></div></div>;\r\n        }\r\n        else\r\n        {\r\n            if (!this.props.isUnfiltered)\r\n                return <div> </div>;\r\n            else\r\n                return <div><LoadedImage src={this.props.src.img}/><div>\r\n                    <Button bsStyle=\"primary\"\r\n                            onClick={this.favoriteMeme}> Add Favorite </Button></div></div>\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}